<p-toolbar styleClass="mb-6">
  <ng-template pTemplate="start">
    <p-button label="New" icon="pi pi-plus" severity="success" (onClick)="openNewMethodologySection()" />
  </ng-template>
  <ng-template pTemplate="end">
    <p-button label="Export" icon="pi pi-upload" severity="secondary" />
  </ng-template>
</p-toolbar>

<!-- Use the shared dynamic table component -->
<app-table [headers]="tableHeaders" [data]="allMethodologies" [showActions]="true" (edit)="editMethodology($event)"
  (delete)="deleteMethodology($event)"></app-table>

<!-- Dialog for adding/editing partners -->
<p-dialog [header]="isEdit ?'Update selected methodology item' : 'Add new methodology item'" [(visible)]="showAddDialog"
  [modal]="true" [style]="{width: '90vw', maxWidth: '550px'}">
  @if(!isDelete) {
  <form [formGroup]="addMethodologiesConfig" class="flex flex-column gap-4">
    <div class="flex flex-column gap-2 my-4">
      <p-floatlabel>
        <input type="text" pInputText id="name" formControlName="name" required autofocus class="w-full" />
        <label for="name">Title</label>
      </p-floatlabel>
    </div>

    <div class="flex flex-column gap-2">
      <p-floatlabel>
        <input type="text" pInputText id="name" formControlName="titleEn" required autofocus class="w-full" />
        <label for="name">Title (EN)</label>
      </p-floatlabel>
    </div>

    <div class="flex flex-column gap-2">
      <p-floatlabel>
        <textarea rows="5" cols="30" pTextarea formControlName="description" class="w-full" rows="3"></textarea>
        <label>Description</label>
      </p-floatlabel>
    </div>

    <div class="flex flex-column gap-2">
      <p-floatlabel>
        <textarea rows="5" cols="30" pTextarea formControlName="descriptionEn" class="w-full" rows="3"></textarea>
        <label>Description (En)</label>
      </p-floatlabel>
    </div>


    <div class="flex flex-column gap-2">
      <p-floatlabel class="w-full" variant="on">
        <p-select inputId="on_label" [options]="icons" optionLabel="name" styleClass="w-full" />
        <label for="on_label">Icon</label>
      </p-floatlabel>
    </div>

    <div class="flex flex-column gap-2">
      <label>Is cutting edge technology ?</label>
      <p-toggleswitch formControlName="isCuttingEdgeTechnology" />
    </div>
  </form>
  }
  @else {
  <p class="font-bold text-center">Are you sure you want to delete this methodolgoy?</p>
  }

  <div class="flex justify-end gap-2 mt-4">
    <p-button severity="danger" label="Cancel" icon="pi pi-times" (onClick)="showAddDialog = false"
      class="p-button-text" />
    <p-button severity="success" label="Save" icon="pi pi-check" [disabled]="!isDelete && !addMethodologiesConfig.valid"
      (onClick)="!isDelete ? (isEdit ? updatedMethodology() : addNewMethodology()) : deleteSelectedMethodology()" />
  </div>
</p-dialog>